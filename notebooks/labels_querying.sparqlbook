[
  {
    "kind": 1,
    "language": "markdown",
    "value": "The following is to be run on the `https://probe.stad.gent/sparql` SPARQL endpoint.\r\n\r\n### A look at the triple store",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nSELECT ?subject ?predicate ?object\r\nWHERE {\r\n  ?subject ?predicate ?object\r\n}\r\nLIMIT 10",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "### Querying for properties of decisions",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX prov: <http://www.w3.org/ns/prov#>\r\nPREFIX eli: <http://data.europa.eu/eli/ontology#>\r\nPREFIX besluit: <http://data.vlaanderen.be/ns/besluit#>\r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\nPREFIX mandaat: <http://data.vlaanderen.be/ns/mandaat#>\r\n\r\nSELECT DISTINCT ?property WHERE {\r\n    ?besluit a besluit:Besluit ;\r\n    ?property ?value .\r\n}\r\n",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "### Querying for decisions with annotations",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX prov: <http://www.w3.org/ns/prov#>\r\nPREFIX eli: <http://data.europa.eu/eli/ontology#>\r\nPREFIX besluit: <http://data.vlaanderen.be/ns/besluit#>\r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\nPREFIX mandaat: <http://data.vlaanderen.be/ns/mandaat#>\r\n\r\nSELECT ?besluit ?annotation ?title ?content ?subject ?motivering WHERE {\r\n    ?besluit a besluit:Besluit ;\r\n    eli:title ?title ;\r\n    <http://mu.semte.ch/vocabularies/ext/hasAnnotation> ?annotation ;\r\n    <http://lblod.data.gift/vocabularies/besluit/extractedDecisionContent> ?content ;\r\n    besluit:motivering ?motivering .\r\n}\r\n\r\nLIMIT 20",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "### Deeper look at the annotation's properties and values",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "SELECT ?property ?value\r\nWHERE {\r\n  <https://lblod.data.gift/concepts/ml2grow/annotations/ddc64c7e-0b8d-45d9-8502-724e1a7cbe58> ?property ?value .\r\n}\r\nORDER BY ?property",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "The following is to be run on the `https://stad.gent/sparql` SPARQL endpoint.\r\n\r\n### Viewing properties and values of a concept\r\n\r\nThis is where the label is stored (prefLabel).",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "SELECT DISTINCT ?property ?value\r\nWHERE {\r\n  <http://stad.gent/id/concepts/business_capabilities/concept_2> ?property ?value .\r\n}\r\nORDER BY ?property\r\n",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "SELECT DISTINCT ?property ?value\r\nWHERE {\r\n  <http://stad.gent/id/concepts/business_capabilities/concept_4> ?property ?value .\r\n}\r\nORDER BY ?property\r\n",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "### Viewing a label under a different concept\r\n\r\ngent_words is another concept just like business_capabilities.",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "SELECT DISTINCT ?property ?value\r\nWHERE {\r\n  <http://stad.gent/id/concepts/gent_words/485> ?property ?value .\r\n}\r\nORDER BY ?property\r\n",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "The following is run on the `https://probe.stad.gent/sparql` SPARQL endpoint.\r\n\r\n# Querying for decisions with a certain label (using the label's URI)",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX prov: <http://www.w3.org/ns/prov#>\r\nPREFIX besluit: <http://data.vlaanderen.be/ns/besluit#>\r\nPREFIX eli: <http://data.europa.eu/eli/ontology#>\r\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\r\nPREFIX oa: <http://www.w3.org/ns/oa#>\r\n\r\nSELECT ?annotation ?target ?title ?motivering (GROUP_CONCAT(?value; separator=', ') AS ?values) ?description ?date ?derivedFrom\r\nWHERE {\r\n  ?annotation oa:hasBody <http://stad.gent/id/concepts/gent_words/310> ;\r\n          oa:hasTarget ?target .\r\n  ?target eli:title ?title ;\r\n          besluit:motivering ?motivering ;\r\n          prov:value ?value ;\r\n          eli:description ?description ;\r\n          eli:date_publication ?date ;\r\n          prov:wasDerivedFrom ?derivedFrom .\r\n}\r\n\r\nLIMIT 10",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "# Testing of a query generated by the AI",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX prov: <http://www.w3.org/ns/prov#>  \r\nPREFIX besluit: <http://data.vlaanderen.be/ns/besluit#>  \r\nPREFIX eli: <http://data.europa.eu/eli/ontology#>  \r\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  \r\nPREFIX oa: <http://www.w3.org/ns/oa#>   \r\n\r\nSELECT ?annotation ?target ?title ?motivering (GROUP_CONCAT(?value; separator=', ') AS ?values) ?description ?date ?derivedFrom  WHERE {      \r\n    ?annotation oa:hasBody <http://stad.gent/id/concepts/policy_domains_themes/concept_89> ;                  \r\n    oa:hasTarget ?target .      \r\n    ?target eli:title ?title ;              \r\n    besluit:motivering ?motivering ;              \r\n    prov:value ?value ;              \r\n    eli:description ?description ;              \r\n    eli:date_publication ?date ;              \r\n    prov:wasDerivedFrom ?derivedFrom .  \r\n}  \r\nLIMIT 3",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "### Querying for decisions with multiple labels\r\nSeparating the label URIs with commas = AND relationship. This means that we want the decisions that have the label \"groen\" AND the label \"Groen en milieu\".\r\n\r\nThe URI of \"groen\" is http://stad.gent/id/concepts/gent_words/164\r\n\r\nThe URI of \"Groen en milieu\" is http://stad.gent/id/concepts/decision_making_themes/concept_46 \r\n\r\nThe following query doesn't return anything since no decisions match the filtering.",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX prov: <http://www.w3.org/ns/prov#>  \r\nPREFIX besluit: <http://data.vlaanderen.be/ns/besluit#>  \r\nPREFIX eli: <http://data.europa.eu/eli/ontology#>  \r\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  \r\nPREFIX oa: <http://www.w3.org/ns/oa#>\r\n\r\nSELECT ?annotation ?target ?title ?motivering (GROUP_CONCAT(?value; separator=', ') AS ?values) ?description ?date ?derivedFrom WHERE {\r\n    ?annotation oa:hasBody <http://stad.gent/id/concepts/gent_words/164>, <http://stad.gent/id/concepts/decision_making_themes/concept_46> ;\r\n                oa:hasTarget ?target .\r\n    ?target eli:title ?title ;\r\n            besluit:motivering ?motivering ;\r\n            prov:value ?value ;\r\n            eli:description ?description ;\r\n            eli:date_publication ?date ;\r\n            prov:wasDerivedFrom ?derivedFrom .\r\n    FILTER (\r\n        CONTAINS(LCASE(?title), \"recycling\") || \r\n        CONTAINS(LCASE(?description), \"recycling\")\r\n    )\r\n} LIMIT 10",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "``VALUES`` can be used to look for decisions where a certain property has a certain value. In the example below it's used to look for decisions made by the mayor (using the URI referring to him).",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX prov: <http://www.w3.org/ns/prov#>\r\nPREFIX eli: <http://data.europa.eu/eli/ontology#>\r\nPREFIX besluit: <http://data.vlaanderen.be/ns/besluit#>\r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\nPREFIX mandaat: <http://data.vlaanderen.be/ns/mandaat#>\r\n\r\nSELECT ?besluit ?title ?publication_date ?agendapunt ?orgaan ?bestuursorgaanURI WHERE {\r\n    ?besluit a besluit:Besluit ;\r\n    eli:date_publication ?publication_date ;\r\n    eli:title_short ?title ;\r\n    prov:wasGeneratedBy ?behandelingVanAgendapunt .\r\n    ?behandelingVanAgendapunt dct:subject ?agendapunt .\r\n    ?agendapunt ^besluit:behandelt ?zitting .\r\n    ?zitting besluit:isGehoudenDoor ?bestuursorgaanURI ;\r\n    besluit:geplandeStart ?zitting_datum .\r\n    ?bestuursorgaanURI skos:prefLabel ?orgaan .\r\nVALUES ?bestuursorgaanURI{<http://data.lblod.info/id/bestuursorganen/c484767ea88b545af011c47b52ac540a0ffdab400cfe9d3f53c6685ec8733cc7>}\r\n}\r\nORDER BY DESC(?publication_date) \r\nLIMIT 100",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "### Example decisions about environment relating to \"dust\"",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX dct: <http://purl.org/dc/terms/> \r\nPREFIX prov: <http://www.w3.org/ns/prov#> \r\nPREFIX eli: <http://data.europa.eu/eli/ontology#> \r\nPREFIX besluit: <http://data.vlaanderen.be/ns/besluit#> \r\nPREFIX oa: <http://www.w3.org/ns/oa#> \r\nSELECT ?annotation ?target ?title ?motivering (GROUP_CONCAT(?value; separator=', ') AS ?values) ?description ?date ?derivedFrom WHERE {\r\n    ?annotation oa:hasBody <http://stad.gent/id/concepts/gent_words/310> ; \r\n    oa:hasTarget ?target . \r\n    ?target eli:title ?title ; \r\n    besluit:motivering ?motivering ; \r\n    prov:value ?value ; \r\n    eli:description ?description ; \r\n    eli:date_publication ?date ; \r\n    prov:wasDerivedFrom ?derivedFrom . \r\n    FILTER (CONTAINS(LCASE(?title), 'stof') || CONTAINS(LCASE(?description), 'stof') || CONTAINS(LCASE(?motivering), 'stof')) \r\n} \r\nORDER BY DESC(?date) \r\nLIMIT 3",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "### Filtering on labels using UNION\r\nThe use of ``UNION`` in this query allows for flexibility and broadens the search criteria, enabling the retrieval of annotations associated with multiple specific concepts without needing to run separate queries for each concept. Think of it as an OR statement in logic, but in practice it combines decisions that have concept_89 as a label, with ones that have concept_37, with ones that have concept_88.",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX dct: <http://purl.org/dc/terms/> \r\nPREFIX prov: <http://www.w3.org/ns/prov#> \r\nPREFIX eli: <http://data.europa.eu/eli/ontology#> \r\nPREFIX besluit: <http://data.vlaanderen.be/ns/besluit#> \r\nPREFIX oa: <http://www.w3.org/ns/oa#> \r\n\r\nSELECT ?annotation ?target ?title ?motivering (GROUP_CONCAT(?value; separator=', ') AS ?values) ?description ?date ?derivedFrom WHERE {\r\n    { ?annotation oa:hasBody <http://stad.gent/id/concepts/decision_making_themes/concept_89> . }\r\n    UNION\r\n    { ?annotation oa:hasBody <http://stad.gent/id/concepts/decision_making_themes/concept_37> . }\r\n    UNION\r\n    { ?annotation oa:hasBody <http://stad.gent/id/concepts/decision_making_themes/concept_88> . }\r\n    \r\n    ?annotation oa:hasTarget ?target . \r\n    ?target eli:title ?title ; \r\n    besluit:motivering ?motivering ; \r\n    prov:value ?value ; \r\n    eli:description ?description ; \r\n    eli:date_publication ?date ; \r\n    prov:wasDerivedFrom ?derivedFrom . \r\n    \r\n} \r\nORDER BY DESC(?date) \r\nLIMIT 3",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "### Filtering on labels using VALUES\r\nIn this revised SPARQL query, the ``VALUES`` keyword is used instead of ``UNION`` to filter results. The VALUES keyword provides a more concise and efficient way to specify a set of acceptable values for a variable.\r\n\r\nThis is the chosen way for filtering on multiple labels in the the examples file (questions_and_queries.json).",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX prov: <http://www.w3.org/ns/prov#>\r\nPREFIX eli: <http://data.europa.eu/eli/ontology#>\r\nPREFIX besluit: <http://data.vlaanderen.be/ns/besluit#>\r\nPREFIX oa: <http://www.w3.org/ns/oa#>\r\n\r\nSELECT ?annotation ?target ?title ?motivering (GROUP_CONCAT(?value; separator=', ') AS ?values) ?description ?date ?derivedFrom\r\nWHERE {\r\n    ?annotation oa:hasBody ?body ;\r\n                oa:hasTarget ?target .\r\n    VALUES ?body {\r\n        <http://stad.gent/id/concepts/decision_making_themes/concept_89>\r\n        <http://stad.gent/id/concepts/decision_making_themes/concept_37>\r\n        <http://stad.gent/id/concepts/decision_making_themes/concept_88>\r\n    }\r\n    ?target eli:title ?title ;\r\n            besluit:motivering ?motivering ;\r\n            prov:value ?value ;\r\n            eli:description ?description ;\r\n            eli:date_publication ?date ;\r\n            prov:wasDerivedFrom ?derivedFrom .\r\n}\r\nORDER BY DESC(?date)\r\nLIMIT 3",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX dct: <http://purl.org/dc/terms/> \r\nPREFIX prov: <http://www.w3.org/ns/prov#> \r\nPREFIX eli: <http://data.europa.eu/eli/ontology#> \r\nPREFIX besluit: <http://data.vlaanderen.be/ns/besluit#> \r\nPREFIX oa: <http://www.w3.org/ns/oa#>  \r\n\r\nSELECT ?annotation ?target ?title ?motivering (GROUP_CONCAT(?value; separator=', ') AS ?values) ?description ?date ?derivedFrom WHERE {\r\n    ?annotation oa:hasBody ?body ;\r\n                oa:hasTarget ?target .  \r\n    VALUES ?body { <http://stad.gent/id/concepts/decision_making_themes/concept_89> <http://stad.gent/id/concepts/decision_making_themes/concept_37> <http://stad.gent/id/concepts/decision_making_themes/concept_88> }   \r\n    ?target eli:title ?title ;\r\n    besluit:motivering ?motivering ;             \r\n    prov:value ?value ;             \r\n    eli:description ?description ; \r\n    prov:wasDerivedFrom ?derivedFrom ;\r\n    eli:date_publication ?date .             \r\n} \r\n\r\nORDER BY DESC(?date) \r\nLIMIT 3",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "### Another example with VALUES",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "PREFIX eli: <http://data.europa.eu/eli/ontology#>\r\nPREFIX oa: <http://www.w3.org/ns/oa#>\r\nSELECT *\r\n{\r\n  ?annotation oa:hasBody ?body ;\r\n              oa:hasTarget ?target .\r\n  VALUES ?body { <http://stad.gent/id/concepts/decision_making_themes/concept_21> <http://stad.gent/id/concepts/gent_words/82> }\r\n  ?target eli:title ?title ;\r\n          eli:date_publication ?date .\r\n}\r\nORDER BY DESC(?date)\r\nLIMIT 10",
    "metadata": {}
  }
]